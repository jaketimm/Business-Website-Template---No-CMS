<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Renderer</title>
    <!-- Include Marked library -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div id="content"></div>

    <script>
        // URL of the Markdown file
        const markdownFilePath = 'content/posts/this-is-a-test-post/index.md';

        // Function to split the front matter and Markdown content
        function splitFrontMatter(markdown) {
            const frontMatterRegex = /^---\n([\s\S]*?)\n---\n/;
            const match = markdown.match(frontMatterRegex);
            let frontMatter = {};
            let content = markdown;

            if (match) {
                // Extract front matter and Markdown content
                frontMatter = parseYAML(match[1]);
                content = markdown.slice(match[0].length);
            }

            return { frontMatter, content };
        }

        // Simple YAML parser function
        function parseYAML(yamlString) {
            const lines = yamlString.split('\n');
            const result = {};
            for (const line of lines) {
                const [key, value] = line.split(':');
                if (key && value) {
                    result[key.trim()] = value.trim();
                }
            }
            return result;
        }

        // Fetch the Markdown file
        fetch(markdownFilePath)
            .then(response => response.text())
            .then(data => {
                // Split the front matter and content
                const { frontMatter, content } = splitFrontMatter(data);

                // Convert Markdown to HTML
                const html = marked(content);

                // Insert the HTML into the page
                document.getElementById('content').innerHTML = html;

                // Optionally, display front matter data
                console.log('Front Matter:', frontMatter);
            })
            .catch(error => {
                console.error('Error fetching or converting markdown:', error);
            });
    </script>
</body>
</html>
